<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ğŸ›°ï¸ 3I/ATLAS â€” Portal educativo PRO</title>
  <meta name="theme-color" content="#0f172a" />
  <link rel="manifest" href="./manifest.json" />
  <link rel="icon" href="./assets/icons/atlas-192.png" />
  <link rel="stylesheet" href="./css/styles.css" />
  <!-- Leaflet para mapa geogrÃ¡fico -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css" integrity="" crossorigin=""/>
</head>
<body class="dark">
  <header class="topbar">
    <div class="brand">
      <span class="logo">â˜„ï¸</span>
      <div class="titles">
        <h1>3I/ATLAS</h1>
        <p>Visitante interestelar â€¢ julio 2025 â€¢ datos educativos</p>
      </div>
    </div>
    <div class="toggles">
      <button id="btnTheme" class="btn-ghost" title="Cambiar tema">ğŸŒ“</button>
      <button id="btnInstall" class="btn-primary" title="Instalar PWA">ğŸ“² Instalar</button>
    </div>
  </header>

  <main class="layout">
    <nav class="sidebar">
      <button data-view="dashboard" class="nav-btn active">ğŸ“Š Panel</button>
      <button data-view="viewer3d" class="nav-btn">ğŸ§Š 3D</button>
      <button data-view="viewerAR" class="nav-btn">ğŸ“± AR</button>
      <button data-view="viewerVR" class="nav-btn">ğŸ¥½ VR</button>
      <button data-view="registro" class="nav-btn">âœ… Registro</button>
      <button data-view="quiz" class="nav-btn">ğŸ§ª Quiz</button>
      <button data-view="tickets" class="nav-btn">ğŸŸï¸ Ticket</button>
      <button data-view="mapa" class="nav-btn">ğŸ—ºï¸ Mapa Geo</button>
      <button data-view="orbita" class="nav-btn">ğŸŒ€ Ã“rbita 3D</button>
      <button data-view="admin" class="nav-btn">ğŸ› ï¸ Docente</button>
      <button data-view="docs" class="nav-btn">ğŸ“š Docs</button>
    </nav>

    <section class="content">
      <!-- DASHBOARD -->
      <section id="view-dashboard" class="view visible">
        <h2>ğŸ“Š Panel de situaciÃ³n â€” 3I/ATLAS</h2>
        <div class="cards-grid" id="cardsProgress">
          <article class="card">
            <h3>ğŸ“… Descubrimiento</h3>
            <p><strong>1 julio 2025</strong> â€” Sistema ATLAS (Chile)</p>
          </article>
          <article class="card">
            <h3>â˜€ï¸ Perihelio</h3>
            <p><strong>30 octubre 2025</strong> â€” ~1.4 UA</p>
          </article>
          <article class="card">
            <h3>ğŸŒ AproximaciÃ³n</h3>
            <p><strong>19 diciembre 2025</strong> â€” ~1.79 UA</p>
          </article>
          <article class="card badge" id="badgeUser">
            <h3>ğŸ… Progreso</h3>
            <p id="badgeText">Sin medallas aÃºn</p>
          </article>
        </div>
        <div class="panel-flex">
          <div class="panel-left">
            <h3>ğŸ“ˆ Ephemeris bÃ¡sica</h3>
            <table id="tblEphemeris" class="table"></table>
          </div>
          <div class="panel-right">
            <h3>ğŸ“ Calculadora de distancia</h3>
            <form id="frmCalc">
              <label>Distancia al Sol (UA)
                <input type="number" step="0.01" id="inpDistSun" value="1.40" />
              </label>
              <label>Distancia a la Tierra (UA)
                <input type="number" step="0.01" id="inpDistEarth" value="1.79" />
              </label>
              <button type="submit" class="btn-primary micro">Calcular km estimados</button>
            </form>
            <p id="calcResult" class="result"></p>
            <p class="hint">* 1 UA â‰ˆ 149 597 870 km</p>
          </div>
        </div>
        <div class="canvas-box">
          <h3>ğŸ”­ VariaciÃ³n de magnitud (simulada)</h3>
          <canvas id="chartMag" width="400" height="150"></canvas>
        </div>
      </section>

      <!-- VIEWER 3D -->
      <section id="view-viewer3d" class="view">
        <h2>ğŸ§Š VisualizaciÃ³n 3D</h2>
        <p>Reemplaza <code>assets/models/3i-atlas.glb</code> por tu modelo real.</p>
        <model-viewer src="./assets/models/3i-atlas.glb" camera-controls auto-rotate ar shadow-intensity="1" style="width:100%;height:420px;background:#000;"></model-viewer>
      </section>

      <!-- VIEWER AR -->
      <section id="view-viewerAR" class="view">
        <h2>ğŸ“± Modo AR educativo</h2>
        <p>Usa un dispositivo mÃ³vil o Quest con WebXR.</p>
        <model-viewer src="./assets/models/3i-atlas.glb"
                      ar
                      ar-modes="webxr scene-viewer quick-look"
                      camera-controls
                      shadow-intensity="1"
                      style="width:100%;height:420px;background:#000;">
        </model-viewer>
        <p class="hint">Incluye etiquetas: NÃºcleo, Cola de polvo, Cola de iones.</p>
      </section>

      <!-- VIEWER VR -->
      <section id="view-viewerVR" class="view">
        <h2>ğŸ¥½ Modo VR / 360Â°</h2>
        <iframe src="https://aframe.io/examples/showcase/helloworld/" title=" VR" class="frame-"></iframe>
      </section>

      <!-- REGISTRO -->
      <section id="view-registro" class="view">
        <h2>âœ… Registro de observaciones</h2>
        <form id="frmLog" class="form-log">
          <label>Fecha observaciÃ³n
            <input type="date" id="logDate" />
          </label>
          <label>Brillo aparente (mag)
            <input type="number" step="0.1" id="logMag" placeholder="13.2" />
          </label>
          <label>Comentario
            <textarea id="logComment" rows="3" placeholder="Condiciones de cielo, instrumento, notas..."></textarea>
          </label>
          <button class="btn-primary micro" type="submit">Guardar registro</button>
        </form>
        <h3>ğŸ“„ Registros actuales</h3>
        <table id="tblLogs" class="table small">
          <thead>
            <tr><th>#</th><th>Fecha</th><th>Mag</th><th>Comentario</th></tr>
          </thead>
          <tbody></tbody>
        </table>
        <button id="btnExportCSV" class="btn-secondary micro">â¬‡ï¸ Exportar CSV</button>
      </section>

      <!-- QUIZ -->
      <section id="view-quiz" class="view">
        <h2>ğŸ§ª Quiz rÃ¡pido sobre 3I/ATLAS</h2>
        <div id="quizBox" class="quiz-box"></div>
      </section>

      <!-- TICKETS -->
      <section id="view-tickets" class="view">
        <h2>ğŸŸï¸ Ticket de salida</h2>
        <form id="frmTicket" class="form-log">
          <label>Â¿QuÃ© es un objeto interestelar?
            <textarea id="t1" rows="2"></textarea>
          </label>
          <label>Â¿QuÃ© dato de 3I/ATLAS te pareciÃ³ mÃ¡s raro?
            <textarea id="t2" rows="2"></textarea>
          </label>
          <label>Â¿CÃ³mo se descubriÃ³?
            <textarea id="t3" rows="2"></textarea>
          </label>
          <button class="btn-primary micro" type="submit">Enviar ticket</button>
        </form>
        <p id="ticketMsg" class="result"></p>
      </section>

      <!-- MAPA GEO -->
      <section id="view-mapa" class="view">
        <h2>ğŸ—ºï¸ Mapa de observaciones</h2>
        <p class="hint">Muestra las coordenadas enviadas por los estudiantes (lat/lon) desde el invernadero o desde casa.</p>
        <div id="map" style="width:100%;height:360px;border-radius:1rem;overflow:hidden;background:#000;"></div>
      </section>

      <!-- Ã“RBITA 3D -->
      <section id="view-orbita" class="view">
        <h2>ğŸŒ€ Ã“rbita 3D ()</h2>
        <p>VisualizaciÃ³n preliminar de la trayectoria hiperbÃ³lica usando Three.js.</p>
        <div id="orbitContainer" style="width:100%;height:360px;background:#000;border-radius:1rem;"></div>
      </section>

      <!-- ADMIN DOCENTE -->
      <section id="view-admin" class="view">
        <h2>ğŸ› ï¸ Panel docente</h2>
        <div class="admin-grid">
          <div class="admin-card">
            <h3>ğŸ“¦ Registros totales</h3>
            <p id="admTotal">0</p>
          </div>
          <div class="admin-card">
            <h3>ğŸ§ª Tickets enviados</h3>
            <p id="admTickets">0</p>
          </div>
          <div class="admin-card">
            <h3>ğŸ… Medallas alumnos</h3>
            <p id="admBadges">0</p>
          </div>
        </div>
        <p class="hint">* Esto se puede alimentar directo desde Google Sheets.</p>
      </section>

      <!-- DOCS -->
      <section id="view-docs" class="view">
        <h2>ğŸ“š DocumentaciÃ³n & notas</h2>
        <ul class="doc-list">
          <li>Resumen del descubrimiento</li>
          <li>Datos orbitales</li>
          <li>Actividades para aula (STEM / AstronomÃ­a / FÃ­sica)</li>
          <li>IntegraciÃ³n con hojas de cÃ¡lculo (Google Sheets)</li>
          <li>apps-script/3i-atlas.gs incluido en <code>/docs</code></li>
        </ul>
      </section>
    </section>
  </main>

  <footer class="footer">
    <p>ğŸ›°ï¸ 3I/ATLAS â€” Portal educativo PRO. Listo para GitHub Pages.</p>
  </footer>

  <script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js" integrity="" crossorigin=""></script>
  <script src="https://unpkg.com/three@0.160.0/build/three.min.js"></script>
  <script src="./js/config.js"></script>
  <script src="./js/app.js"></script>
  <script src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
</body>
</html>
